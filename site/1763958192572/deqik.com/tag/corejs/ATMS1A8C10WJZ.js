(function () { var AdmicroTagManagerData = {"tag":[{"id":12921,"name":"Admicro Analytics","code":"","template_id":6,"parameter":[{"key":"domain","value":"ttavio.vn","type":"TEXT"},{"key":"domain_id","value":"8028","type":"INTEGER"}],"option":[{"key":"canBeRestarted","value":"true","type":"BOOL"},{"key":"useDocumentWrite","value":"false","type":"BOOL"},{"key":"loadCoreAfter","value":"false","type":"BOOL"}],"dependence":[],"firing":[16311]},{"id":12922,"name":"Admicro Retareting","code":"","template_id":8,"parameter":[{"key":"retargeting_id","value":"11391","type":"INTEGER"}],"option":[{"key":"canBeRestarted","value":"true","type":"BOOL"},{"key":"useDocumentWrite","value":"false","type":"BOOL"},{"key":"loadCoreAfter","value":"false","type":"BOOL"}],"dependence":[],"firing":[16311]}],"trigger":[{"type_name":"PAGE_VIEW","id":16311,"setting":[],"autoSettingRule":[],"rule":[]},{"type_name":"DOM_READY","id":16312,"setting":[],"autoSettingRule":[],"rule":[]},{"type_name":"WINDOW_LOADED","id":16313,"setting":[],"autoSettingRule":[],"rule":[]}],"variable":[{"name":"Click ID","type":"DATA_LAYER"},{"name":"Has Cookie","type":"DATA_LAYER"},{"name":"Visitor Number","type":"DATA_LAYER"},{"name":"Page URL","type":"DATA_LAYER"},{"name":"Click URL","type":"DATA_LAYER"},{"name":"Click Classes","type":"DATA_LAYER"},{"name":"Click Element","type":"DATA_LAYER"},{"name":"Form Classes","type":"DATA_LAYER"},{"name":"Form Element","type":"DATA_LAYER"},{"name":"Form ID","type":"DATA_LAYER"},{"name":"Has Element ID","type":"DATA_LAYER"},{"name":"Form URL","type":"DATA_LAYER"},{"name":"Page Path","type":"DATA_LAYER"},{"name":"Page Hostname","type":"DATA_LAYER"},{"name":"Click Text","type":"DATA_LAYER"},{"name":"Referrer","type":"DATA_LAYER"},{"name":"Scroll Depth Units","type":"DATA_LAYER"}],"template":[{"name":"Tracking PageView","id":6,"type_id":4,"code":function(){window.admicro_analytics_q = window.admicro_analytics_q || []; window.admicro_analytics_q.push({event: "pageviews", domain: getParameter('domain'), id: +getParameter('domain_id')});},"code_load":function(){window['admicroAnalyticsObject']='admicro_analytics'; window['admicro_analytics']=window['admicro_analytics'] || function(){ (window['admicro_analytics_q'] = window['admicro_analytics_q'] || []).push(arguments); }; window['admicro_analytics'].t=1 * new Date(); var a = document.createElement("script"); a.type = "text/javascript"; a.async = !0; a.src = "//static.amcdn.vn/core/analytics.js"; var b = document.getElementsByTagName("script")[0]; b.parentNode.insertBefore(a, b);}},{"name":"Retargeting","id":8,"type_id":5,"code":function(){window.admicro_cpa_q = window.admicro_cpa_q || []; window.admicro_cpa_q.push({event: "retargeting", id: getParameter('retargeting_id')});},"code_load":function(){var a = [ "//static.amcdn.vn/cpa/amc-core.min.js"]; for (var i = 0; i < a.length; i++) {var b = document.createElement("script");b.type = "text/javascript"; b.async = !0; b.src = a[i]; var c = document.getElementsByTagName("script")[0]; c.parentNode.insertBefore(b, c);}}}]}; var s=window.location.search;if(s.indexOf("atm_preview")>0){var m=new RegExp("[?&]uid=([^&#]*)").exec(s);if(document.currentScript){var d=document.currentScript.src,w=document.getElementsByTagName("script")[0],g=document.createElement("script");d=d.replace("corejs","previewjs");var u=s.indexOf("atm_debug")>0?"debug":(new Date) * 1;return d=d.replace(".js",m[1]+".js?"+u),g.src=d,g.async=!0,void w.parentNode.insertBefore(g,w)}alert("Trinh duyet khong ho tro preview")}; var _=Object.defineProperty;var L=(n,t,e)=>t in n?_(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var T=(n,t,e)=>(L(n,typeof t!="symbol"?t+"":t,e),e);(function(){"use strict";function noop(){}function run(n){return n()}function blank_object(){return Object.create(null)}function run_all(n){n.forEach(run)}function is_function(n){return typeof n=="function"}function safe_not_equal(n,t){return n!=n?t==t:n!==t||n&&typeof n=="object"||typeof n=="function"}function is_empty(n){return Object.keys(n).length===0}function detach(n){n.parentNode&&n.parentNode.removeChild(n)}function children(n){return Array.from(n.childNodes)}let current_component;function set_current_component(n){current_component=n}function get_current_component(){if(!current_component)throw new Error("Function called outside component initialization");return current_component}function onMount(n){get_current_component().$$.on_mount.push(n)}const dirty_components=[],binding_callbacks=[];let render_callbacks=[];const flush_callbacks=[],resolved_promise=Promise.resolve();let update_scheduled=!1;function schedule_update(){update_scheduled||(update_scheduled=!0,resolved_promise.then(flush))}function add_render_callback(n){render_callbacks.push(n)}const seen_callbacks=new Set;let flushidx=0;function flush(){if(flushidx!==0)return;const n=current_component;do{try{for(;flushidx<dirty_components.length;){const t=dirty_components[flushidx];flushidx++,set_current_component(t),update(t.$$)}}catch(t){throw dirty_components.length=0,flushidx=0,t}for(set_current_component(null),dirty_components.length=0,flushidx=0;binding_callbacks.length;)binding_callbacks.pop()();for(let t=0;t<render_callbacks.length;t+=1){const e=render_callbacks[t];seen_callbacks.has(e)||(seen_callbacks.add(e),e())}render_callbacks.length=0}while(dirty_components.length);for(;flush_callbacks.length;)flush_callbacks.pop()();update_scheduled=!1,seen_callbacks.clear(),set_current_component(n)}function update(n){if(n.fragment!==null){n.update(),run_all(n.before_update);const t=n.dirty;n.dirty=[-1],n.fragment&&n.fragment.p(n.ctx,t),n.after_update.forEach(add_render_callback)}}function flush_render_callbacks(n){const t=[],e=[];render_callbacks.forEach(r=>n.indexOf(r)===-1?t.push(r):e.push(r)),e.forEach(r=>r()),render_callbacks=t}const outroing=new Set;function transition_in(n,t){n&&n.i&&(outroing.delete(n),n.i(t))}function mount_component(n,t,e){const{fragment:r,after_update:i}=n.$$;r&&r.m(t,e),add_render_callback(()=>{const l=n.$$.on_mount.map(run).filter(is_function);n.$$.on_destroy?n.$$.on_destroy.push(...l):run_all(l),n.$$.on_mount=[]}),i.forEach(add_render_callback)}function destroy_component(n,t){const e=n.$$;e.fragment!==null&&(flush_render_callbacks(e.after_update),run_all(e.on_destroy),e.fragment&&e.fragment.d(t),e.on_destroy=e.fragment=null,e.ctx=[])}function make_dirty(n,t){n.$$.dirty[0]===-1&&(dirty_components.push(n),schedule_update(),n.$$.dirty.fill(0)),n.$$.dirty[t/31|0]|=1<<t%31}function init(n,t,e,r,i,l,s=null,c=[-1]){const o=current_component;set_current_component(n);const a=n.$$={fragment:null,ctx:[],props:l,update:noop,not_equal:i,bound:blank_object(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(o?o.$$.context:[])),callbacks:blank_object(),dirty:c,skip_bound:!1,root:t.target||o.$$.root};s&&s(a.root);let f=!1;if(a.ctx=e?e(n,t.props||{},(g,h,...u)=>{const m=u.length?u[0]:h;return a.ctx&&i(a.ctx[g],a.ctx[g]=m)&&(!a.skip_bound&&a.bound[g]&&a.bound[g](m),f&&make_dirty(n,g)),h}):[],a.update(),f=!0,run_all(a.before_update),a.fragment=r?r(a.ctx):!1,t.target){if(t.hydrate){const g=children(t.target);a.fragment&&a.fragment.l(g),g.forEach(detach)}else a.fragment&&a.fragment.c();t.intro&&transition_in(n.$$.fragment),mount_component(n,t.target,t.anchor),flush()}set_current_component(o)}class SvelteComponent{constructor(){T(this,"$$");T(this,"$$set")}$destroy(){destroy_component(this,1),this.$destroy=noop}$on(t,e){if(!is_function(e))return noop;const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(e),()=>{const i=r.indexOf(e);i!==-1&&r.splice(i,1)}}$set(t){this.$$set&&!is_empty(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const PUBLIC_VERSION="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(PUBLIC_VERSION);const utis={mergeObjects:function(){for(var n={},t=0;t<arguments.length;t++)for(let e in arguments[t])n[e]=arguments[t][e];return n},random:function(){return"_"+(Math.random()+Date.now()*1).toString(36).replace(".","")},strToUni:function(n){if(n===""||n===void 0||n===null)return n;var t=n;t=t.toLowerCase(),t=t.replace(/\à|\á|\ạ|\ả|\ã|\â|\ầ|\ấ|\ậ|\ẩ|\ẫ|\ă|\ằ|\ắ|\ặ|\ẳ|\ẵ/g,"a"),t=t.replace(/è|é|ẹ|ẻ|ẽ|ê|ề|ế|ệ|ể|ễ/g,"e"),t=t.replace(/ì|í|ị|ỉ|ĩ/g,"i"),t=t.replace(/ò|ó|ọ|ỏ|õ|ô|ồ|ố|ộ|ổ|ỗ|ơ|ờ|ớ|ợ|ở|ỡ/g,"o"),t=t.replace(/ù|ú|ụ|ủ|ũ|ư|ừ|ứ|ự|ử|ữ/g,"u"),t=t.replace(/ỳ|ý|ỵ|ỷ|ỹ/g,"y"),t=t.replace(/đ/g,"d"),t=t.replace(/!|@|%|\^|\*|\(|\)|\+|\=|\<|\>|\?|\/|,|\.|\:|\;|\'|\"|\&|\#|\[|\]|~|\$|_|`|-|{|}|\||\\/g," "),t=t.replace(/ + /g," "),t=t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");for(var e=t.replace(/[^a-zA-Z ]/g,"").split(" "),r=e.length,i=0;i<r;i++)i===0?e[i]=e[i].toLowerCase():e[i]=e[i].charAt(0).toUpperCase()+e[i].slice(1).toLowerCase();return e.join("")},getCookie:function(n){if(document.cookie){n=n+"=";let r=document.cookie.split("; ");if(r.length)for(var t=0;t<r.length;t++){var e=r[t].replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");if(e.indexOf(n)===0)return e.substring(n.length,e.length)}}},getCustomDataLayer:function(str){try{var d="atm.dataLayer."+str;return eval(d)}catch(n){this.error(n);return}},getFromBetween:{results:[],string:"",getFromBetween:function(n,t){if(this.string.indexOf(n)<0||this.string.indexOf(t)<0)return!1;var e=this.string.indexOf(n)+n.length,r=this.string.substr(0,e),i=this.string.substr(e),l=r.length+i.indexOf(t);return this.string.substring(e,l)},removeFromBetween:function(n,t){if(this.string.indexOf(n)<0||this.string.indexOf(t)<0)return!1;var e=n+this.getFromBetween(n,t)+t;this.string=this.string.replace(e,"")},getAllResults:function(n,t){if(!(this.string.indexOf(n)<0||this.string.indexOf(t)<0)){var e=this.getFromBetween(n,t);if(this.results.push(e),this.removeFromBetween(n,t),this.string.indexOf(n)>-1&&this.string.indexOf(t)>-1)this.getAllResults(n,t);else return}},get:function(n,t,e){return this.results=[],this.string=n,n===null||n===""||n===void 0?n:(this.getAllResults(t,e),this.results)}},getSettingValue:function(n,t){for(var e=0;e<n.length;e++)if(n[e].key===t)return n[e].value},getUA:function(){var n=navigator.userAgent,t,e=n.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(e[1])?(t=/\brv[ :]+(\d+)/g.exec(n)||[],"IE "+(t[1]||"")):e[1]==="Chrome"&&(t=n.match(/\b(OPR|Edge)\/(\d+)/),t!=null)?t.slice(1).join(" ").replace("OPR","Opera"):(e=e[2]?[e[1],e[2]]:[navigator.appName,navigator.appVersion,"-?"],(t=n.match(/version\/(\d+)/i))!=null&&e.splice(1,1,t[1]),e.join(" "))},sendLog:function(n,t){},errorType:{element:function(n){return console.error("Error at clicked element"),n.target||void 0},rule:function(n){return console.error("Error at trigger's rule"),JSON.stringify(n)},variable:function(n){return console.error("Error at variables"),n},code:function(n){return console.error("Error at template code"),n.toString()},custom:function(n){return console.error("Error at custom code"),n},customevent:function(n){return console.error("Error at custom event"),JSON.stringify(n)},d:function(n){return console.error("Loi tag manager"),n}},error:function(n,t,e){this.errorType[t]?this.sendLog(n,this.errorType[t](e)):this.sendLog(n,this.errorType.d(e)),window.atmError.push({message:n.message,stack:n.stack,error:n})},checkIndex:function(n,t){if(!n.length)return-1;if(Array.prototype.indexOf)return n.indexOf(t);for(var e=n.length,r=0;r<e;r++)if(n[r]===t)return r;return-1},getUrlParam:function(n){for(var t=window.location.search.substring(1)||"",e=t.split("&"),r=e.length,i=0;i<r;i++)if(e[i].indexOf(n)===0)return decodeURI(e[i].split("=")[1])||"";return null},dupArr:function(n){for(var t=[],e=0;e<n.length;e++)t[e]=n[e];return t}};function clickEvent(n,t){try{const e=n.target||n.srcElement;if(!e)return;t.eventList.clickClasses=e.className?e.className:"",t.eventList.clickElement=e||void 0,t.eventList.clickText=e.innerText&&e.innerText.match(/\s{2,}/gm)==null?e.innerText:"",t.eventList.clickId=e.id?e.id:"",t.eventList.clickUrl=e.href?e.href:"",t.eventList.target=e.target?e.target:"_self",t.dataLayerPush()}catch(e){utis.error(e)}}function getElementInfo(n,t){try{t.eventList.clickClasses=n.className||"",t.eventList.clickElement=n,t.eventList.clickText=n.innerText&&n.innerText.match(/\s{2,}/gm)==null?n.innerText:"",t.eventList.clickId=n.id||"",t.eventList.clickUrl=n.href||"",t.eventList.target=n.target||"",t.dataLayerPush()}catch(e){utis.error(e)}}function customEventTrigger(n){let t=!0;for(let r=0;r<n.triggers.length&&t;r++)if(utis.getSettingValue(n.triggers[r].setting,"usePostmessage")==="true"){let i=function(l){if(typeof l.data=="object"&&typeof l.data.event<"u"){const s=n.getVariable("{{Event Prefix}}","TEXT");s&&(l.data.event.indexOf(s)>=0||l.data.event.indexOf("atm.")>=0)&&window.atmDataLayer.push({event:l.data.event,data:l.data,time:Date.now()*1})}};t=!1,window.addEventListener("message",i,!1)}const e=function(r,i){r.push=function(l){Array.prototype.push.call(r,l),i(l)}};n.dataLayer.customEvent=[];try{e(window.atmDataLayer,function(r){window.atmCustomEventData=r,n.checkTrigger(n.customEvents)})}catch(r){utis.error(r,"customevent",window.atmDataLayer)}}function checkCustomEventSetting(n,t){const e=n.setting;return t.getVariable(e[0].value,"TEXT")===window.atmCustomEventData.event}function observeHistoryChange(n,t,e){const r=e,i=window.history.replaceState,l=window.history.pushState,s=window.onpopstate,c=function(o,a,f){r.atmDataLayerPush({event:"atm.historyChange",time:Date.now()*1,oldFragment:a.eventList.newFragment||void 0,newFragment:f.newFragment||void 0,newState:o,oldState:a.eventList.newState||void 0}),a.eventList.newUrl=f.newUrl||window.location||void 0,a.eventList.oldUrl=f.oldUrl||a.eventList.newUrl||void 0,a.eventList.oldFragment=a.eventList.newFragment||void 0,a.eventList.newFragment=f.newFragment||void 0,a.eventList.oldState=a.eventList.newState||void 0,a.eventList.newState=o,a.dataLayerPush(),a.checkTrigger(a.historyChanges)};window.history.replaceState=function(){const o={oldUrl:window.location.href,newUrl:arguments[2]};i.apply(window.history,arguments),c("replaceState",r,o)},window.history.pushState=function(){const o={oldUrl:window.location.href,newUrl:arguments[2]};l.apply(window.history,arguments),c("pushState",r,o)},window.onpopstate=function(){c("popState",r,{newFragment:window.location.hash.substring(1)}),typeof s=="function"&&s()}}function checkScrollThreshold(n,t){const e=document.documentElement||document.scrollingElement||document.body||document.getElementsByTagName("body")[0],r=n.setting;let i=e.scrollHeight,l=e.scrollWidth,s=[],c=[];function o(a,f,g,h){let u=utis.getSettingValue(a,f),m=[];if(u!==null&&u!=="")try{if(u=t.getVariable(u,"TEXT").replace(/([^\d\,])/g,"").split(","),typeof u=="object"){const p=[];for(let E=0;E<u.length;E++)p.push(g?Math.round(h*+u[E]/100):Number(u[E]));m=p}return m}catch(p){t.error(p)}}r.length&&(utis.getSettingValue(r,t.config.VERTICAL_SCROLL_DEPTH)==="true"&&(s=o(r,t.config.VERTICAL_PERCENT,!0,i)||o(r,t.config.VERTICAL_PIXEL,!1,i)),utis.getSettingValue(r,t.config.HORIZONTAL_SCROLL_DEPTH)==="true"&&(c=o(r,t.config.HORIZONTAL_PERCENT,!0,l)||o(r,t.config.HORIZONTAL_PIXEL,!1,l))),t.dataLayer.event.scrollDepth[n.id]=[s,c]}function checkScrollDepthSetting(n,t){const e=document.documentElement||document.scrollingElement||document.getElementsByTagName("body")[0],r=e.scrollTop,i=e.clientHeight,l=e.scrollLeft,s=e.clientWidth,c=t.dataLayer.event.scrollDepth?t.dataLayer.event.scrollDepth[n.id].slice():[];function o(a,f,g){const h=[];for(let u=0;u<a.length;u++)a[u]<f?(t.atmDataLayerPush({event:"atm.scrollDepth",time:Date.now()*1,scrollThreshold:a[u],scrollDirection:g}),t.runTagWithTriggerId(n.id)):h.push(a[u]);return h}try{t.dataLayer.event.scrollDepth[n.id][0]=o(c[0],r+i,"vertical"),t.dataLayer.event.scrollDepth[n.id][1]=o(c[1],l+s,"horizontal")}catch(a){utis.error(a)}return!1}function checkTimeLoadSetting(n){let t=n.setting,e=this,r,i,l,s,c;for(let a=0;a<t.length;a++)t[a].key==="eventName"&&(r=this.getVariable(t[a].value,"TEXT")),t[a].key==="interval"&&(i=Number(this.getVariable(t[a].value,"TEXT"))),t[a].key==="limit"&&(t[a].value!==null?(t[a].value=this.getVariable(t[a].value,"TEXT"),l=Number(t[a].value),s=Number(t[a].value)):(l=1e9,s=1e9));if(typeof i!="number"||typeof l!="number")return!1;let o=Date.now()*1;return c=setInterval(function(){s===0?clearInterval(c):(e.atmDataLayerPush({event:r,timerCurrentTime:Date.now()*1,timerStartTime:o,timerInterval:i,timerLimit:l,timerEventNumber:l-s+1,timerElapsedTime:Date.now()*1-o,timerId:c}),e.runTagWithTriggerId(n.id),s--)},i),!1}function checkLinkClickSetting(n,t){let e=0,r=n.setting;return utis.getSettingValue(r,t.config.WAIT_FOR_TAG)==="true"&&(e=Number(utis.getSettingValue(r,t.config.TIME_WAIT))),t.dataLayer.event.linkClick.isOpen=!1,e!=0?e=Date.now()*1+e:e=0,t.dataLayer.event.linkClick.timeWait=t.dataLayer.event.linkClick.timeWait?t.dataLayer.event.linkClick.timeWait<e?e:t.dataLayer.event.linkClick.timeWait:e,!0}function javascriptErrorTrigger(n,t){const e=t,r=window.onerror;function i(l,s,c,o,a){for(let f=0;f<n.length;f++)e.atmDataLayerPush({event:"atm.javascriptError",time:Date.now()*1,errorMessage:l,errorLine:c,errorSource:s,error:a,errorCol:o}),e.checkTriggerRule(n[f])&&e.runTagWithTriggerId(n[f].id),e.dataLayerPush();return!0}window.addEventListener?window.addEventListener("error",function(l,s,c,o,a){i(l,s,c,o,a)}):window.onerror=function(l,s,c,o,a){i(l,s,c,o,a),typeof r=="function"&&r(l,s,c,o,a)}}window.atmDataLayer=window.atmDataLayer||[],window.atmVariables=window.atmVariables||[],window.atmDataLayer.length===0&&window.atmDataLayer.push({"atm.start":Date.now()*1,event:"atm.js",id:0});let paramTemp=[];utis.random();const atmTriggers={},atmTags={},atmTemplates={},atmCodeLoad={};class Atm{constructor(){this.data={},this.dataLayer={},this.tagsFired=[],this.eventList={},this.doms=[],this.pageView=[],this.pvWithRule=[],this.pvNoRule=[],this.windowLoaded=[],this.clickElements=[],this.customEvents=[],this.scrollElements=[],this.historyChanges=[],this.javascriptError=[],this.elementVisibility=[],this.justLink=[],this.timeLoad=[],this.variableData={},this.params=[],this.codeLoaded=[],this.triggers={},this.tags={},this.variables={},this.templates={},this.config={DOCUMENT_WRITE:"useDocumentWrite",RESTART:"canBeRestarted",IS_RAN:"isRan",VERTICAL_SCROLL_DEPTH:"verticalScrollDepths",VERTICAL_PERCENT:"verticalPercentages",VERTICAL_PIXEL:"verticalPixels",HORIZONTAL_SCROLL_DEPTH:"horizontalScrollDepths",HORIZONTAL_PERCENT:"horizontalPercentages",HORIZONTAL_PIXEL:"horizontalPixels",ID:"id",CLASS:"class",TIMES:"times",PERCENT_VISIBLE:"percentVisible",ONSCREEN_DURATION:"onscreenDuration",OBSERVE_DOM_CHANGE:"observeDomChange",WAIT_FOR_TAG:"waitForTag",TIME_WAIT:"timeWait",DEFAULT:"default"},this.setVariableType={STRING:function(t,e){t.variableData[t.variables[e].name]=typeof t.variables[e].value=="string"?t.variables[e].value:""},DATA_LAYER:function(t,e){const r=utis.strToUni(t.variables[e].name);t.variableData[t.variables[e].name]=t.dataLayer[t.config.DEFAULT].hasOwnProperty(r)?t.dataLayer[t.config.DEFAULT][r]:""},CUSTOM_DATALAYER:function(t,e){t.variableData[t.variables[e].name]=t.getCustomDataLayer(t.variables[e].value)||""},DOM_TEXT:function(t,e){t.variableData[t.variables[e].name]=document.getElementById(t.variables[e].value)},COOKIE_VALUE:function(t,e){t.variableData[t.variables[e].name]=utis.getCookie(t.variables[e].value)||""},ARRAY:function(t,e){try{t.variableData[t.variables[e].name]=new Function("return "+t.variables[e].value)()||""}catch(r){t.variableData[t.variables[e].name]=[],utis.error(r,"variable",t.variables[e].value)}},URL_QUERY:function(t,e){t.variableData[t.variables[e].name]=utis.getUrlParam(t.variables[e].value)||""},JAVASCRIPT_VARIABLE:function(t,e){try{t.variableData[t.variables[e].name]=new Function("return "+t.variables[e].value)()||void 0}catch{t.variableData[t.variables[e].name]=void 0}},Datalayer:function(t,e){}},this.checkRuleFunction={CONTAINS:function(e,r){return typeof e=="string"?e.indexOf(r)>-1:utis.checkIndex(e,r)>-1},DOES_NOT_CONTAINS:function(e,r){return typeof e=="string"?e.indexOf(r)==-1:utis.checkIndex(e,r)==-1},EQUALS:function(e,r){return e==r},DOES_NOT_EQUALS:function(e,r){return e!=r},STARTS_WITH:function(e,r){return typeof e=="string"?e.indexOf(r)==0:e.length?e[0]==r:!1},DOES_NOT_START_WITH:function(e,r){return typeof e=="string"?e.indexOf(r)!=0:e.length?e[0]!=r:!1},ENDS_WITH:function(e,r){return typeof e=="string"?e.indexOf(r)+r.length==e.length:e.length?e[e.length-1]==r:!1},DOES_NOT_END_WITH:function(e,r){return typeof e=="string"?e.indexOf(r)+r.length!=e.length:e.length?e[e.length-1]!=r:!1},LESS_THAN:function(e,r){return e=Number(e),r=Number(r),isNaN(e)||isNaN(r)?!1:e<r},LESS_OR_EQUAL:function(e,r){return e=Number(e),r=Number(r),isNaN(e)||isNaN(r)?!1:e<=r},GREATER_THAN:function(e,r){return e=Number(e),r=Number(r),isNaN(e)||isNaN(r)?!1:e>r},GREATER_OR_EQUAL:function(e,r){return e=Number(e),r=Number(r),isNaN(e)||isNaN(r)?!1:e>=r},IS_EXISTS:function(e,r,i){if(i==="Has Element ID")return document.getElementById(r)!==null;if(i==="Has Cookie")return utis.getCookie(r)!==void 0},MATCH_CSS_SELECTOR:function(e,r){if(!document.querySelectorAll)return!1;const i=document.querySelectorAll(r),l=i.length;if(!l||!e)return!1;for(let s=0;s<l;s++)if(i[s]==e)return!0;return!1},DOES_NOT_MATCH_CSS_SELECTOR:function(e,r){if(!document.querySelectorAll)return!1;const i=document.querySelectorAll(r),l=i.length;let s=0;if(!l||!e)return!1;for(let c=0;c<l;c++)i[c]==e&&s++;return!s},MATCH_REGEX:function(e,r){return r=RegExp(r,"g"),typeof e=="string"?e.match(r)!==null:!1},MATCH_REGEX_IGNORE_CASE:function(e,r){return r=RegExp(r,"gi"),typeof e=="string"?e.match(r)!==null:!1},DOES_NOT_MATCH_REGEX:function(e,r){return r=RegExp(r,"g"),typeof e=="string"?e.match(r)===null:!1},err:function(){return!1}},this.triggerClassify={PAGE_VIEW:function(t,e){t.triggers[e].rule.length?(t.pvWithRule.push(t.triggers[e]),t.pageView.push(t.triggers[e])):(t.pvNoRule.push(t.triggers[e].id),t.pageView.unshift(t.triggers[e]))},DOM_READY:function(t,e){t.doms.push(t.triggers[e])},WINDOW_LOADED:function(t,e){t.windowLoaded.push(t.triggers[e])},CLICK_ELEMENT:function(t,e){t.clickElements.push(t.triggers[e])},SCROLL_DEPTHS:function(t,e){t.scrollElements.push(t.triggers[e])},HISTORY_CHANGE:function(t,e){t.historyChanges.push(t.triggers[e])},JAVASCRIPT_ERROR:function(t,e){t.javascriptError.push(t.triggers[e])},ELEMENT_VISIBILITY:function(t,e){t.elementVisibility.push(t.triggers[e])},LINK_CLICK:function(t,e){t.justLink.push(t.triggers[e])},CUSTOM_EVENT:function(t,e){t.customEvents.push(t.triggers[e])},TIME_LOAD:function(t,e){t.timeLoad.push(t.triggers[e])},err:function(){}}}init(){let t,e=this,r=!1,i=!1,l=!1;function s(u){t&&window.clearTimeout(t),t=window.setTimeout(function(){e.checkTrigger(e.scrollElements)},100)}function c(u,m,p){u.addEventListener(m,p,!1)}function o(u,m,p){u.removeEventListener(m,p,!1)}document.getElementsByTagName("body")[0]&&(this.checkTrigger(this.pageView,"custom"),l=!0),this.timeLoad.length&&this.checkTrigger(this.timeLoad);function a(){return r||(r=!0,l||e.checkTrigger(e.pageView,"custom"),e.atmDataLayerPush({event:"atm.domReady",time:Date.now()*1}),e.checkTrigger(e.doms)),o(document,"DOMContentLoaded",a),o(document,"readystatechange",g),!0}function f(){o(document,"DOMContentLoaded",a),o(window,"load",f),i||(i=!0,e.atmDataLayerPush({event:"atm.windowLoaded",time:Date.now()*1}),e.windowLoaded.length&&e.checkTrigger(e.windowLoaded));const u=e.scrollElements.length;if(u){for(let m=0;m<u;m++)checkScrollThreshold(e.scrollElements[m],e);document.addEventListener("scroll",s),window.scrollTo(window.scrollX,window.scrollY+1)}}function g(){document.readyState==="interactive"&&(a(),o(document,"DOMContentLoaded",a),o(document,"readystatechange",g)),document.readyState==="complete"&&(o(document,"DOMContentLoaded",a),o(window,"load",f),a(),f())}c(document,"readystatechange",g),c(document,"DOMContentLoaded",a),c(window,"load",function(){a(),f()}),document.readyState==="interactive"&&a(),document.readyState==="complete"&&(a(),f()),(this.clickElements.length||this.justLink.length)&&c(document,"mouseup",function(u){if(clickEvent(u,e),e.atmDataLayerPush({event:"atm.click",time:Date.now()*1,element:u.target||u.srcElement,elementClasses:(u.target||u.srcElement).className,elementId:(u.target||u.srcElement).id,elementUrl:(u.target||u.srcElement).href||"",elementTarget:(u.target||u.srcElement).target}),e.clickElements.length&&e.checkTrigger(e.clickElements),e.justLink.length)try{return u.button!==2&&h(u.target||u.srcElement),!0}catch(m){utis.error(m,"element",u)}});function h(u){u&&(u.tagName==="A"&&u.href?u.href!=="javascript:void(0)"&&u.href!=="javascript:;"&&u.href!=="javascript:void(0);"&&(getElementInfo(u,e),e.atmDataLayerPush({event:"atm.linkClick",time:Date.now()*1,element:u,elementClasses:u.className,elementId:u.id,elementUrl:u.href||"",elementTarget:u.target}),e.dataLayer.event.linkClick={href:u.href,target:u.target||"_self",triggerTime:Date.now()*1-100},e.checkTrigger(e.justLink)):u.parentElement&&h(u.parentElement))}this.historyChanges.length&&observeHistoryChange(this.getHistoryChange,this.historyChanges,this),this.javascriptError.length&&javascriptErrorTrigger(this.javascriptError,this),this.customEvents.length&&customEventTrigger(this)}getScrollPercent(t){const e=document.documentElement||document.scrollingElement||document.getElementsByTagName("body")[0],r=e.scrollTop,i=e.scrollHeight,l=e.scrollLeft,s=e.scrollWidth,c=Math.floor(r/i*100),o=Math.floor(l/s*100);return t?c:o}atmDataLayerPush(t){t.id=window.atmDataLayer.length;const e=utis.mergeObjects({},this.variableData);window.atmVariables.push(e),window.atmDataLayer.push(t),this.dataLayerPush()}isMobile(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}setVariable(){const t=this.variables.length;if(t)for(let e=0;e<t;e++)this.setVariableType[this.variables[e].type]&&this.setVariableType[this.variables[e].type](this,e)}dataLayerPush(){this.dataLayer.attributes={pixel:10},this.dataLayer.event=this.dataLayer.event||{},this.dataLayer.event.scrollDepth=this.dataLayer.event.scrollDepth||{},this.eventList.device=this.isMobile()?"mobile":"pc",this.eventList.referer=document.referrer||"",this.eventList.pageUrl=window.location.href||"",this.eventList.pagePath=window.location.pathname||"",this.eventList.pageHostname=window.location.hostname||"",this.eventList.scrollDepthUnits=this.getScrollPercent(1),this.dataLayer[this.config.DEFAULT]=this.eventList||[],this.setVariable()}checkTagOption(){this.dataLayer.tagOption={};for(let t=0;t<this.tags.length;t++){this.dataLayer.tagOption[this.tags[t].id]={};for(let e=0;e<this.tags[t].option.length;e++)this.dataLayer.tagOption[this.tags[t].id][this.tags[t].option[e].key]=this.tags[t].option[e].value==="true"?!0:this.tags[t].option[e].value==="false"?!1:this.tags[t].option[e].value}}runCode(t,e,r){let i=e;if(r){paramTemp=JSON.parse(JSON.stringify(r));const l=paramTemp.length;if(l){for(let s=0;s<l;s++)paramTemp[s].value=this.getVariable(paramTemp[s].value,paramTemp[s].type);i&&i(),paramTemp=[]}}else{i.indexOf("%")>0&&(i=i.replace(/%/g,"%25"));const l=decodeURIComponent(this.getVariable(i,"TEXT"));let s;if(document.getElementsByTagName("body")[0]){t?(s=document.createElement("div"),s.style.visibility="hidden",s.style.display="none",document.getElementsByTagName("body")[0].appendChild(s)):s=document.getElementsByTagName("body")[0];try{postscribe(s,l)}catch(c){utis.error(c,"custom",l)}}}}checkTrigger(t,e){const r=t.length;if(r)for(let i=0;i<r;i++)this.checkTriggerRule(t[i])&&t[i].isEnabled&&this.checkTriggerSetting(t[i])&&this.runTagWithTriggerId(t[i].id,e)}checkTriggerRule(t,e,r){const i=e?"autoSettingRule":"rule";if(t[i].length){let l=0,s=t[i],c=s.length;if(c){for(let o=0;o<c;o++)for(const a in this.variableData)if(s[o].variable_name===a){let f;try{f=this.checkRule(s[o].operator,s[o].value,this.variableData[a],s[o].variable_name),l=f?l+1:l}catch(g){const h=[s[o].operator,s[o].value,this.variableData[a],s[o].variable_name];utis.error(g,"rule",h)}}}return l===s.length?(e&&(this.triggers[r].isEnabled=!0),!0):(e&&(this.triggers[r].isEnabled=!1),!1)}else return e&&(this.triggers[r].isEnabled=!0),!0}checkTriggerSetting(t){const e=t.type_name;return e==="PAGE_VIEW"||e==="DOM_READY"||e==="WINDOW_LOADED"||e==="CLICK_ELEMENT"||e==="HISTORY_CHANGE"?!0:e==="LINK_CLICK"?checkLinkClickSetting(t,this):e==="SCROLL_DEPTHS"?checkScrollDepthSetting(t,this):e==="CUSTOM_EVENT"?checkCustomEventSetting(t,this):e==="TIME_LOAD"?checkTimeLoadSetting(t):!1}runTagWithTriggerId(t,e,r){const i=atmTriggers[t];if(i){const l=i.length;for(let s=0;s<l;s++){const c=[],o=i[s],a=atmTags[o],f=r||this.dataLayer.tagOption[o];if(r||f[this.config.RESTART]||!f[this.config.RESTART]&&utis.checkIndex(this.tagsFired,o)<0){if(a.templateId!==0&&e!=="custom"){const h=atmTemplates[a.templateId].code,u=atmCodeLoad[atmTemplates[a.templateId].type_id];u(),r?this.runCode(!1,h,a.parameter):this.runCode(f[this.config.DOCUMENT_WRITE],h,a.parameter),c.push(o),this.tagsFired.push(o)}else if(a.templateId===0&&e!=="template"){const h=a.code;this.runCode(f[this.config.DOCUMENT_WRITE],h),c.push(o),this.tagsFired.push(o)}}c.length&&(window.atmDataLayer[window.atmDataLayer.length-1].tagID=window.atmDataLayer[window.atmDataLayer.length-1].tagID||[],window.atmDataLayer[window.atmDataLayer.length-1].tagID=window.atmDataLayer[window.atmDataLayer.length-1].tagID.concat(c))}}}checkRule(t,e,r,i){return r=r||"",e=e||"",typeof r=="number"&&(r=r.toString()),this.checkRuleFunction[t]&&this.checkRuleFunction[t](r,e,i)||!1}getVariable(t,e){let r=t,i=[];if(r===""||r===void 0||r===null)return 0;if(typeof r=="string"&&(i=utis.getFromBetween.get(r,"{{","}}")),i.length===0&&e==="TEXT")return r;if(i.length===0&&e==="INTEGER")return parseFloat(r)!==NaN?parseFloat(r):r;const l=i.length;if(l)for(let s=0;s<l;s++)typeof r=="string"&&(r=r.replace("{{"+i[s]+"}}",this.variableData[i[s]])),typeof this.variableData[i[s]]=="object"&&(r=this.variableData[i[s]]);if(i=[],e==="TEXT"||e==="OBJECT")return r;if(e==="INTEGER")return parseFloat(r)!==NaN?parseFloat(r):r}setData(t){this.triggers=t.trigger,this.tags=t.tag,this.variables=t.variable,this.templates=t.template,window.previewTags=this.tags,window.triggersList=this.triggers;const e=this.templates.length,r=this.tags.length,i=this.triggers.length,l=Math.max(e,r,i);for(let s=0;s<l;s++){if(s<e){const c=this.templates[s],o=c.id;atmTemplates[o]={},atmTemplates[o].code=c.code,atmTemplates[o].type_id=c.type_id,atmCodeLoad[c.type_id]=c.code_load}if(s<i&&this.triggerClassify[this.triggers[s].type_name]&&this.triggerClassify[this.triggers[s].type_name](this,s),s<r){const c=this.tags[s],o=c.id;atmTags[o]={},atmTags[o].templateId=c.template_id,atmTags[o].code=c.code,atmTags[o].parameter=c.parameter,atmTags[o].option=c.option;const a=c.firing.length;for(let f=0;f<a;f++)atmTriggers[c.firing[f]]=atmTriggers[c.firing[f]]||[],c.template_id==2?atmTriggers[c.firing[f]].unshift(o):atmTriggers[c.firing[f]].push(o)}}}checkAutoSettingRule(){const t=this.triggers.length;if(t)for(let e=0;e<t;e++)this.checkTriggerRule(this.triggers[e],!0,e)}runTriggerPageview(){window.atmError=window.atmError||[],this.dataLayerPush(),this.atmDataLayerPush({event:"atm.pageView",time:Date.now()*1});const t=this.pvNoRule,e=t.length;for(let r=0;r<e;r++)this.runTagWithTriggerId(t[r],"template",!0);this.checkAutoSettingRule(),this.checkTagOption(),this.checkTrigger(this.pvWithRule,"template")}}var getParameter=function(n,t){var e=utis.getSettingValue(paramTemp,n);return t==="true"?e?e=e+".":e="":t==="false"&&(e?e=e:e=""),e};window.getParameter=getParameter;function instance(n){const t=new Atm;return t.setData(AdmicroTagManagerData),t.runTriggerPageview(),onMount(()=>{t.init()}),[]}class App extends SvelteComponent{constructor(t){super(),init(this,t,instance,null,safe_not_equal,{})}}new App({target:document.querySelector("head")})})(); })();